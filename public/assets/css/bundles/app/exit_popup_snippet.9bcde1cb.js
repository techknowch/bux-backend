/*! For license information please see exit_popup_snippet.9bcde1cb.js.LICENSE.txt */
"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[9438],{19135:function(e,t,n){n.d(t,{Z:function(){return u}});var i,s,a,r=n(4002),o=n.n(r);class u{static async getData(){return window.appPersonalizationSettings?window.appPersonalizationSettings:(this.ajaxPromise||(this.ajaxPromise=new Promise((e=>{o().ajax({url:"/ajax/personalization-settings",success:t=>{window.appPersonalizationSettings=t,this.ajaxPromise=null,e(t)}})}))),this.ajaxPromise)}}a=null,(s="ajaxPromise")in(i=u)?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a},36011:function(e,t,n){n.d(t,{Z:function(){return s}});n(4002);var i=n(4002);class s{constructor(){this.tabLoadEventHandler(),i(window).on("unload",this.tabUnloadEventHandler.bind(this))}tabLoadEventHandler(){let e="tab_"+ +new Date;sessionStorage.setItem("TabHash",e);let t=JSON.parse(localStorage.getItem("TabsOpen")||"{}");t[e]=!0,localStorage.setItem("TabsOpen",JSON.stringify(t))}tabUnloadEventHandler(){let e=sessionStorage.getItem("TabHash"),t=JSON.parse(localStorage.getItem("TabsOpen")||"{}");delete t[e],localStorage.setItem("TabsOpen",JSON.stringify(t))}static getTabsCount(){return Object.keys(JSON.parse(localStorage.getItem("TabsOpen")||"{}")).length}}},29641:function(e,t,n){var i=n(4002),s=n.n(i),a=n(36011);function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var o=function e(t,n){function i(e,i,s){if("undefined"!=typeof document){"number"==typeof(s=r({},n,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in s)s[o]&&(a+="; "+o,!0!==s[o]&&(a+="="+s[o].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},s=0;s<n.length;s++){var a=n[s].split("="),r=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(i[o]=t.read(r,o),e===o)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),u=n(19135),p=n(72163),c=n(35495),l=n(2898),d=n(97698);s()(document).ready((()=>{s()(".exit-popup").each(((e,t)=>new h(s()(t))))}));class h{constructor(e){this.$wrapper=e,this.$form=this.$wrapper.find(".ep-form"),this.$result=this.$wrapper.find(".ep-result"),this.$submitBtn=this.$wrapper.find(".ep-form-submit-btn"),this.formValidation=new c.Z(this.$form),this.trackSource=this.$form.closest("[data-track-source]").data("track-source"),editmode&&this.initPopupImg(),this.$wrapper.removeClass("d-none"),setTimeout((()=>this.initShowPopupHandler()),5e3),this.$wrapper.on("click",this.handleClickOutsideOfPopup.bind(this)),this.$wrapper.find(".ep-close-btn, .ep-result-button").on("click",this.closePopup.bind(this)),this.$submitBtn.on("click",this.handleClickSubmitBtn.bind(this))}async initShowPopupHandler(){let e=await u.Z.getData();editmode||isMobile()||o.get("disableExitPopup")||e.isGDPREnabled||(this.handleMouseoutEventFunc=this.handleMouseoutEvent.bind(this),document.addEventListener("mouseout",this.handleMouseoutEventFunc))}handleMouseoutEvent(e){e.toElement||e.relatedTarget||e.clientY>=10||a.Z.getTabsCount()>1||(document.removeEventListener("mouseout",this.handleMouseoutEventFunc),o.set("disableExitPopup",!0,1),this.showPopup())}async handleClickSubmitBtn(e){e.preventDefault(),editmode||this.formValidation.validate()&&(this.$submitBtn.addClass("disabled"),(0,p.L9)(this.trackSource,"form",this.$form.attr("name"),"Submit"),await l.Z.isBot()&&!d.Z.isFormFilledByAutotest(this.$form)||s().ajax({type:"POST",url:this.$form.attr("action")+"?is_submitted=1",data:new FormData(this.$form[0]),processData:!1,contentType:!1,success:()=>{this.$form.addClass("d-none"),this.$result.removeClass("d-none")},error:e=>{this.$submitBtn.removeClass("disabled"),e.responseJSON&&e.responseJSON.errors?this.formValidation.placeErrors(e.responseJSON.errors):this.formValidation.addFormError(translations["Something went wrong. Please, check fields and try again"],!0),console.log(e.responseText)}}))}handleClickOutsideOfPopup(e){e.target===e.currentTarget&&(this.closePopup(),(0,p.L9)(this.$wrapper.data("track-source"),"outside","Popup","Click"))}async showPopup(){let e=await this.initPopupImg();this.$wrapper.addClass("active"),e[0].svgatorPlayer.ready((e=>e.play())),(0,p.L9)(this.$wrapper.data("track-source"),"popup","Exit Popup","Displayed")}async initPopupImg(){let e=this.$wrapper.find(".ep-img-wrapper"),t=e.data("img"),n=e.find("svg");if(n.length)return n;let i=await fetch(t),s=await i.text();return e.html(s),e.find("svg")}closePopup(){this.$wrapper.removeClass("active")}}}},function(e){e.O(0,[3913,6669,2400],(function(){return t=29641,e(e.s=t);var t}));e.O()}]);