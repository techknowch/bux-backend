"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[2235],{11671:function(e,t,i){var a=i(4002),s=i.n(a),r=i(52732),l=i.n(r);class p{constructor(e){this.$wrapper=e,this.$searchInput=this.$wrapper.find(".js-search-input"),this.$tabsWrapper=this.$wrapper.find(".tabs-wrapper"),this.$filtersWrapper=this.$wrapper.find(".filters-wrapper"),this.$mobileFiltersWrapper=this.$wrapper.find(".mobile-filters-wrapper"),this.$filterDescriptionsWrapper=this.$wrapper.find(".filter-descriptions-wrapper"),this.$csListWrapper=this.$wrapper.find(".cs-list-wrapper"),this.$moreBtnWrapper=this.$wrapper.find(".more-cs-btn-wrapper"),this.$allCsLinkWrapper=this.$wrapper.find(".all-cs-link-wrapper"),editmode&&(this.lazyLoad=new(l())({elements_selector:".lazy"}),this.lazyLoad.update(),this.initRemoveFilterBtn()),this.$searchInput.on("keypress",(e=>{13===e.which&&this.executeSearch()})).on("change cut paste keyup",this.handleSearchInputAction.bind(this)),this.$wrapper.on("click",".search-btn",this.executeSearch.bind(this)).on("click",".search-input-cross",(()=>this.$searchInput.val("").change().focus())).on("click",".add-filter-btn",this.handleClickAddFilterBtn.bind(this)).on("click",".more-cs-btn",this.handleClickMoreBtn.bind(this)).on("click",".tab-item",this.handleClickTab.bind(this)).on("click",".cs-filter",this.handleClickFilter.bind(this)).on("click",".hide-tab-btn",this.handleClickHideTab.bind(this)).on("change",".mobile-tab-select",this.handleClickMobileTab.bind(this)).on("change",".mobile-filters-select",this.handleClickMobileFilter.bind(this))}handleClickTab(e){if(e.target!==e.currentTarget)return;let t=s()(e.currentTarget).data("tab");"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",`Case Studies: click: tab "${t}"`]),this.openTab(t),this.openFilter(t,0)}handleClickHideTab(e){let t=s()(e.currentTarget),i=t.closest(".tab-item").find('.hide-tab-checkbox input[type="checkbox"]');t.toggleClass("active"),i.attr("checked",t.hasClass("active"))}handleClickMobileTab(e){let t=s()(e.currentTarget).find("option:selected").data("tab");"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",`Case Studies: click: tab "${t}"`]),this.openTab(t),this.openFilter(t,0)}handleSearchInputAction(){let e=this.$wrapper.find(".search-input-cross");if(this.$searchInput.val()?e.show():e.hide(),!this.$searchInput.val()){this.$tabsWrapper.removeClass("d-none"),this.$wrapper.find(".mobile-tab-select").removeClass("d-none"),this.$filtersWrapper.removeClass("d-none"),this.$mobileFiltersWrapper.removeClass("d-none"),this.$filterDescriptionsWrapper.removeClass("d-none"),this.$allCsLinkWrapper.removeClass("d-none"),this.$wrapper.find(".search-results-label").hide();let e=this.$filtersWrapper.find(".cs-filter.active"),t=e.data("filter-id"),i=e.data("tab");this.openFilter(i,t)}}executeSearch(){let e=this.$wrapper.find(".search-wrapper"),t=this.$wrapper.find(".search-results-label"),i=this.$searchInput.val(),a=this.fixUrl(this.$filtersWrapper.data("base-url"));!i||i.length<2||("undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: search",`Case Studies: search: "${i}"`]),e.addClass("loading"),this.$searchInput.prop("disabled",!0),s().ajax({url:a,type:"GET",data:{query:i,ajax:!0},crossDomain:!1,success:s=>{e.removeClass("loading"),this.$searchInput.prop("disabled",!1),this.$tabsWrapper.addClass("d-none"),this.$wrapper.find(".mobile-tab-select").addClass("d-none"),this.$filtersWrapper.addClass("d-none"),this.$mobileFiltersWrapper.addClass("d-none"),this.$filterDescriptionsWrapper.addClass("d-none"),this.$allCsLinkWrapper.addClass("d-none"),this.$csListWrapper.html(s.listHtml),this.$csListWrapper.data("page",1),this.$csListWrapper.data("query",i),this.$csListWrapper.data("url",a),s.total?(t.find("strong").text(i),t.show()):t.hide(),s.page*s.perPage>=s.total?this.$moreBtnWrapper.hide():this.$moreBtnWrapper.show();let r=this.fixUrl(this.$filtersWrapper.data("base-url"));this.setWindowUrl(r+"?query="+i)}}))}handleClickMoreBtn(){let e=this.$moreBtnWrapper.find(".more-cs-btn"),t=this.fixUrl(this.$csListWrapper.data("url")),i=this.$csListWrapper.data("query"),a=this.$csListWrapper.data("page");if("undefined"!=typeof _paq){let e=this.$filtersWrapper.find(".cs-filter.active"),t=i?`query "${i}"`:`filter "${s().trim(e.text())}"`;_paq.push(["trackEvent","Case Studies","Case Studies: click",`Case Studies: click: "More" button -> ${t} Page ${a+1}`])}e.addClass("loading");let r={page:a+1,ajax:!0,query:i};i&&(r.excludeIds=this.$csListWrapper.find(".cs-search-result-item").map(((e,t)=>+s()(t).data("id"))).get()),s().ajax({url:t,type:"GET",data:r,crossDomain:!1,success:t=>{e.removeClass("loading"),this.$csListWrapper.data("page",t.page).append(t.listHtml),t.page*t.perPage>=t.total&&this.$moreBtnWrapper.hide()}})}handleClickAddFilterBtn(){let e=this.$wrapper.find(".add-filter-wrapper"),t=this.$wrapper.find(".add-filter-btn"),i=this.$wrapper.find(".add-filter-editable"),a=i.find("input"),r=this.$wrapper.find(".visible-filters-editable"),l=this.fixUrl(e.data("url")),p=a.val();p&&(t.prop("disabled",!0),i.removeClass("error-border"),e.find(".error-element").remove(),s().ajax({url:l,type:"GET",data:{fullPaths:[p]},success:s=>{t.prop("disabled",!1);let l=s.data[0],p=l.localizedUrl;if(!p)return i.addClass("error-border"),void e.append('<span class="error-element">Filter should have url</span>');let d=this.$filtersWrapper.data("base-url"),n=this.$filtersWrapper.find('.cs-filter[data-filter-id="'+l.id+'"]');n.find("input").attr("placeholder",l.title),n.attr("href",d+"/"+p),this.openTab(n.data("tab")),n.removeClass("d-none").show().fadeIn().addClass("new-filter"),setTimeout((()=>{n.removeClass("new-filter")}),1300),r.append(","+l.id),a.val(""),this.initRemoveFilterBtn()}}))}handleClickFilter(e){if(e.preventDefault(),e.target!==e.currentTarget)return;let t=s()(e.target);if(t.hasClass("active"))return;let i=t.data("filter-id"),a=t.data("tab"),r=s().trim(t.text());"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",`Case Studies: click: filter "${r}" (tab: "${a}")`]),this.openFilter(a,i)}handleClickMobileFilter(e){let t=s()(e.currentTarget),i=t.find("option:selected"),a=i.data("filter-id"),r=t.data("tab"),l=s().trim(i.text());"undefined"!=typeof _paq&&_paq.push(["trackEvent","Case Studies","Case Studies: click",`Case Studies: click: filter "${l}"`]),this.openFilter(r,a)}openTab(e){e!==this.$wrapper.find(".tab-item.active").data("tab")&&(this.$wrapper.find(".tab-item").removeClass("active"),this.$wrapper.find(`.tab-item[data-tab="${e}"]`).addClass("active"),this.$wrapper.find(".mobile-filters-select").hide(),this.$wrapper.find(`.mobile-filters-select[data-tab="${e}"]`).show(),this.$filtersWrapper.find(".cs-filter").hide(),this.$filtersWrapper.find(`.cs-filter[data-tab="${e}"]`).show())}openFilter(e,t){let i=this.$filtersWrapper.find(`.cs-filter[data-filter-id="${t}"][data-tab="${e}"]`),a=this.fixUrl(i.attr("href"));this.$wrapper.find(`.mobile-filters-select[data-tab="${e}"]`).val(t),this.$filtersWrapper.find(".cs-filter").removeClass("active"),i.addClass("active"),this.$filterDescriptionsWrapper.find(".cs-filter-description").removeClass("active");let r=this.$filterDescriptionsWrapper.find(`.cs-filter-description[data-filter-id="${t}"][data-tab="${e}"]`);r.addClass("active"),s().trim(r.html())||r.html(r.data("filter-description")),this.$csListWrapper.addClass("loading"),s().ajax({url:a,type:"GET",data:{ajax:!0},crossDomain:!1,success:e=>{this.$csListWrapper.removeClass("loading"),this.$csListWrapper.html(e.listHtml),this.$csListWrapper.data("page",1),this.$csListWrapper.data("query",""),this.$csListWrapper.data("url",a),e.page*e.perPage>=e.total?this.$moreBtnWrapper.hide():this.$moreBtnWrapper.show(),this.setWindowUrl(a)}})}initRemoveFilterBtn(){let e=this.$wrapper.find(".visible-filters-editable");this.$filtersWrapper.find(".remove-cs-filter").on("click",(t=>{let i=s()(t.currentTarget).closest(".cs-filter"),a=i.data("filter-id"),r=i.data("tab");i.fadeOut(150,(()=>{i.addClass("d-none"),i.find(".filter-title-editable").html(""),this.$filterDescriptionsWrapper.find(`.cs-filter-description[data-filter-id="${a}"][data-tab="${r}"]`).find(".filter-description-editable .pimcore_wysiwyg").html("");let t=e.text().split(","),s=t.indexOf(""+a);-1!==s&&(t.splice(s,1),e.text(t.join(","))),i.hasClass("active")&&this.openFilter(tab,0)}))}))}fixUrl(e){return"http:"===window.location.protocol&&(e=e.replace("https:","http:")),e}setWindowUrl(e){editmode||history.replaceState({},null,e)}}s()(document).ready((()=>{let e=s()("#case_studies_page");new p(e)}))}},function(e){e.O(0,[3913,2732],(function(){return t=11671,e(e.s=t);var t}));e.O()}]);